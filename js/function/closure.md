# é—­åŒ…  


## ä¸€ã€ä»€ä¹ˆæ˜¯é—­åŒ…ï¼Ÿ

> é—­åŒ…æ˜¯æŒ‡å‡½æ•°å¯ä»¥â€œè®°ä½â€å¹¶è®¿é—®å®ƒå®šä¹‰æ—¶æ‰€åœ¨çš„ä½œç”¨åŸŸï¼Œå³ä½¿è¿™ä¸ªå‡½æ•°åœ¨å½“å‰ä½œç”¨åŸŸä¹‹å¤–è¢«è°ƒç”¨ã€‚

## äºŒã€é—­åŒ…çš„å…¸å‹ä¾‹å­  

```js
function outer() {
  const name = "Alice";

  function inner() {
    console.log(name); // âœ… é—­åŒ…è®¿é—®äº†å¤–éƒ¨å‡½æ•°çš„å˜é‡
  }

  return inner;
}

const fn = outer(); // outer() æ‰§è¡Œåè¿”å› inner å‡½æ•°
fn(); // è¾“å‡ºï¼šAlice
```

## ä¸‰ã€é—­åŒ…çš„ä¸¤ä¸ªå…³é”®ç‰¹æ€§

1. å¯ä»¥è®¿é—®å¤–éƒ¨å‡½æ•°ä½œç”¨åŸŸä¸­çš„å˜é‡

2. å³ä½¿å¤–éƒ¨å‡½æ•°å·²ç»æ‰§è¡Œå®Œæ¯•ï¼Œé—­åŒ…ä»èƒ½â€œè®°ä½â€é‚£ä¸ªä½œç”¨åŸŸ

## å››ã€é—­åŒ…çš„ç»å…¸ç”¨é€”

1. å°è£…ç§æœ‰å˜é‡  

```js
function createCounter() {
  let count = 0;

  return {
    increase() {
      count++;
      console.log(count);
    },
    decrease() {
      count--;
      console.log(count);
    },
  };
}

const counter = createCounter();
counter.increase(); // 1
counter.increase(); // 2
counter.decrease(); // 1
```
ğŸ‘‰ count ä¸èƒ½åœ¨å¤–éƒ¨è®¿é—®ï¼Œåªèƒ½é€šè¿‡é—­åŒ…æ§åˆ¶ã€‚è¿™æ˜¯ä¸€ç§â€œç§æœ‰å±æ€§â€çš„å®ç°æ–¹å¼ã€‚

2. ç”Ÿæˆå‡½æ•°å·¥å‚  

```js
function makeAdder(x) {
  return function(y) {
    return x + y;
  };
}

const add5 = makeAdder(5);
console.log(add5(3)); // 8
console.log(add5(10)); // 15
```
ğŸ‘‰ `x` æ˜¯å›ºå®šå€¼ï¼Œé€šè¿‡é—­åŒ…è®°ä½äº†å®ƒã€‚  

3. è§£å†³å¾ªç¯ä¸­çš„ä½œç”¨åŸŸé—®é¢˜  

```js
// âŒ é”™è¯¯çš„æ–¹å¼
for (var i = 0; i < 3; i++) {
  setTimeout(() => console.log(i), 100);
}
// è¾“å‡ºï¼š3, 3, 3

// âœ… ç”¨é—­åŒ…ä¿å­˜æ¯æ¬¡çš„ i
for (var i = 0; i < 3; i++) {
  (function(j) {
    setTimeout(() => console.log(j), 100);
  })(i);
}
// è¾“å‡ºï¼š0, 1, 2
```

## äº”ã€é—­åŒ…çš„æ³¨æ„äº‹é¡¹

âœ… ä¼˜ç‚¹
- å°è£…å˜é‡ï¼Œä¿æŠ¤æ•°æ®

- å¯ä»¥åˆ›å»ºå‡½æ•°å·¥å‚

- åœ¨å¼‚æ­¥ä¸­ä¿å­˜æ•°æ®

âš ï¸ ç¼ºç‚¹
- å®¹æ˜“é€ æˆ å†…å­˜æ³„æ¼ï¼ˆé—­åŒ…å¼•ç”¨çš„å˜é‡æ— æ³•è¢«å›æ”¶ï¼‰

- ä½¿ç”¨ä¸å½“ä¼šå¯¼è‡´ è°ƒè¯•å›°éš¾  

## å…­ã€é—­åŒ… vs æ™®é€šä½œç”¨åŸŸ

```js
function outer() {
  let secret = "123";

  return function inner() {
    console.log(secret);
  };
}
```
- æ™®é€šä½œç”¨åŸŸï¼šå˜é‡åœ¨å‡½æ•°æ‰§è¡Œå®Œåå°±è¢«é”€æ¯ã€‚

- é—­åŒ…ï¼šç”±äºå†…éƒ¨å‡½æ•°ä»ç„¶å¼•ç”¨è¿™ä¸ªå˜é‡ï¼Œæ‰€ä»¥ä¸ä¼šé”€æ¯ã€‚




